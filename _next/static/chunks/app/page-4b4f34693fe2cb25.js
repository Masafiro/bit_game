(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1057:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var n=r(5155),s=r(2115);function i(e,t){switch(t.operation_type){case"append":{let r=structuredClone(e);return r.push(t.parameter),r}case"bitoperation":{let r=structuredClone(e),n=function(e,t){switch(t.operation_type){case"set":return t.parameter;case"and":return e.split("").map((e,r)=>"1"===e&&"1"===t.parameter[r]?"1":"0").join("");case"or":return e.split("").map((e,r)=>"1"===e||"1"===t.parameter[r]?"1":"0").join("");case"xor":return e.split("").map((e,r)=>"1"===e&&"0"===t.parameter[r]||"0"===e&&"1"===t.parameter[r]?"1":"0").join("");case"xnor":return e.split("").map((e,r)=>e===t.parameter[r]?"1":"0").join("");case"not":return e.split("").map(e=>"1"===e?"0":"1").join("");case"cyclic-lshift":return e.slice(1)+e[0];case"cyclic-rshift":return e[e.length-1]+e.slice(0,-1);default:throw Error("Unknown operation")}}(r[r.length-1],t.bit_operation);return r.push(n),r}case"pop":{let t=structuredClone(e);return t.pop(),t}case"clear":return[]}}function o(e){let{dispatchBitHistory:t,operation:r}=e;return(0,n.jsxs)("button",{className:"bitOperationButton",onClick:()=>{t({operation_type:"bitoperation",bit_operation:r})},children:[r.operation_type,"parameter"in r&&" ".concat(r.parameter)]})}function a(e){let{children:t}=e;return(0,n.jsx)("div",{className:"bitOperationButtonContainer",children:t})}function l(e){let{currentBits:t}=e;return(0,n.jsxs)("div",{className:"bitDisplay",children:[" ",t," "]})}function c(e){let{bitHistory:t,dispatchBitHistory:r}=e;return 1===t.length?(0,n.jsx)("button",{className:"undoButtonDisabled",children:"1 手戻る"}):(0,n.jsx)("button",{className:"undoButtonEnabled",onClick:()=>r({operation_type:"pop"}),children:"1 手戻る"})}function u(e){let{bitHistory:t,dispatchBitHistory:r}=e;return(0,n.jsx)("button",{className:"retryButton",onClick:()=>{let e=t[0];r({operation_type:"clear"}),r({operation_type:"append",parameter:e})},children:"リトライ"})}function p(e){let{children:t}=e;return(0,n.jsx)("div",{className:"problemButtonContainer",children:t})}function m(e){let{problem:t,problemFile:r,setStatus:s}=e;return(0,n.jsx)("button",{className:"problemButton",onClick:()=>s({status_type:"GameScreen",problem_file:r}),children:t})}function d(e){let{setStatus:t}=e;return(0,n.jsx)("div",{children:(0,n.jsxs)(p,{children:[(0,n.jsx)(m,{problem:"Problem 1",problemFile:"problem1.json",setStatus:t}),(0,n.jsx)(m,{problem:"Problem 2",problemFile:"problem2.json",setStatus:t}),(0,n.jsx)(m,{problem:"Problem 3",problemFile:"problem3.json",setStatus:t})]})})}function b(e){let{setStatus:t}=e;return(0,n.jsx)("button",{className:"returnToProblemSelectionButton",onClick:()=>t({status_type:"ProblemSelectionScreen"}),children:"戻る"})}function j(e){let{moveCount:t}=e;return(0,n.jsxs)("div",{children:["手数: ",t]})}function h(e){let{bitHistory:t,problem:r}=e,[i,o]=(0,s.useState)(0);return(0,s.useEffect)(()=>{if(console.log(r),t[t.length-1]===r.target)return;let e=setTimeout(()=>{o(i+100)},100);return()=>clearTimeout(e)},[i]),(0,n.jsxs)("div",{children:["タイム: ",i/1e3,"秒"]})}function x(e){let{setStatus:t,problemFile:r}=e,[p,m]=(0,s.useReducer)(i,[]),[d,x]=(0,s.useState)({bit_length:0,start:"",target:"",operation_count:0,operations:[],minimum_moves:0});return(0,s.useEffect)(()=>{!async function(){let e=await fetch("/problems/"+r),t=await e.json();x(t.problem),m({operation_type:"clear"}),m({operation_type:"append",parameter:t.problem.start})}()},[]),console.log(d),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["Target: ",d.target]}),(0,n.jsx)(l,{currentBits:p[p.length-1]}),(0,n.jsx)(j,{moveCount:p.length-1}),(0,n.jsx)(h,{bitHistory:p,problem:d}),(0,n.jsx)(a,{children:d.operations.map((e,t)=>(0,n.jsx)(o,{dispatchBitHistory:m,operation:e},t))}),(0,n.jsx)(c,{bitHistory:p,dispatchBitHistory:m}),(0,n.jsx)(u,{bitHistory:p,dispatchBitHistory:m}),(0,n.jsx)("div",{children:(0,n.jsx)(b,{setStatus:t})}),(0,n.jsxs)("div",{children:["BitHistory: ",p.toString()]})]})}function f(){return(0,n.jsx)("div",{children:(0,n.jsx)("h1",{className:"title",children:"Bit Breaker"})})}function _(e){let{status:t}=e;switch(t.status_type){case"ProblemSelectionScreen":return(0,n.jsxs)("div",{children:["status_type: ",t.status_type]});case"GameScreen":return(0,n.jsxs)("div",{children:["status_type: ",t.status_type,(0,n.jsx)("br",{}),"problem_file: ",t.problem_file]})}}function y(){let[e,t]=(0,s.useState)({status_type:"ProblemSelectionScreen"});switch(e.status_type){case"ProblemSelectionScreen":return(0,n.jsxs)("div",{children:[(0,n.jsx)(f,{}),(0,n.jsx)(d,{setStatus:t}),(0,n.jsx)(_,{status:e})]});case"GameScreen":return(0,n.jsxs)("div",{children:[(0,n.jsx)(f,{}),(0,n.jsx)(x,{setStatus:t,problemFile:e.problem_file}),(0,n.jsx)(_,{status:e})]})}}},5786:(e,t,r)=>{Promise.resolve().then(r.bind(r,1057))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(5786)),_N_E=e.O()}]);