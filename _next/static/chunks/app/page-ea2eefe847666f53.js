(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{347:()=>{},1485:(e,t,r)=>{Promise.resolve().then(r.bind(r,3792))},3792:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var s=r(5155),n=r(2115);r(347);var a=r(9509);function o(e,t){switch(t.operation_type){case"append":{let r=structuredClone(e);return r.push(t.parameter),r}case"bitoperation":{let r=structuredClone(e),s=function(e,t){switch(t.operation_type){case"set":return t.parameter;case"and":return e.split("").map((e,r)=>"1"===e&&"1"===t.parameter[r]?"1":"0").join("");case"or":return e.split("").map((e,r)=>"1"===e||"1"===t.parameter[r]?"1":"0").join("");case"xor":return e.split("").map((e,r)=>"1"===e&&"0"===t.parameter[r]||"0"===e&&"1"===t.parameter[r]?"1":"0").join("");case"xnor":return e.split("").map((e,r)=>e===t.parameter[r]?"1":"0").join("");case"not":return e.split("").map(e=>"1"===e?"0":"1").join("");case"cyclic-lshift":return e.slice(1)+e[0];case"cyclic-rshift":return e[e.length-1]+e.slice(0,-1);default:throw Error("Unknown operation")}}(r[r.length-1],t.bit_operation);return r.push(s),r}case"pop":{let t=structuredClone(e);return t.pop(),t}case"clear":return[]}}function i(e){let{dispatchBitHistory:t,operation:r}=e;return(0,s.jsxs)("button",{className:"bitOperationButton",onClick:()=>{t({operation_type:"bitoperation",bit_operation:r})},children:[r.operation_type,"parameter"in r&&" ".concat(r.parameter)]})}function l(e){let{children:t}=e;return(0,s.jsx)("div",{className:"bitOperationButtonContainer",children:t})}function c(e){let{currentBits:t}=e;return(0,s.jsxs)("div",{className:"bitDisplay",children:[" ",t," "]})}function u(e){let{bitHistory:t,dispatchBitHistory:r}=e;return 1===t.length?(0,s.jsx)("button",{className:"undoButtonDisabled",children:"1 手戻る"}):(0,s.jsx)("button",{className:"undoButtonEnabled",onClick:()=>r({operation_type:"pop"}),children:"1 手戻る"})}function p(e){let{bitHistory:t,dispatchBitHistory:r}=e;return(0,s.jsx)("button",{className:"retryButton",onClick:()=>{let e=t[0];r({operation_type:"clear"}),r({operation_type:"append",parameter:e})},children:"リトライ"})}function m(e){let{children:t}=e;return(0,s.jsx)("div",{className:"problemButtonContainer",children:t})}function d(e){let{problemName:t,problemFile:r,setStatus:n}=e;return(0,s.jsx)("button",{className:"problemButton",onClick:()=>n({status_type:"ProblemModeGameScreen",problem_file:r}),children:t})}function b(e){let{timeAttackFile:t,setStatus:r}=e;return(0,s.jsx)("button",{className:"timeAttackButton",onClick:()=>r({status_type:"TimeAttackModeGameScreen",time_attack_file:t}),children:"タイムアタック"})}function h(e){let{setStatus:t}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)(m,{children:[(0,s.jsx)(d,{problemName:"Problem 1",problemFile:"problem1.json",setStatus:t}),(0,s.jsx)(d,{problemName:"Problem 2",problemFile:"problem2.json",setStatus:t}),(0,s.jsx)(d,{problemName:"Problem 3",problemFile:"problem3.json",setStatus:t})]}),(0,s.jsx)(b,{timeAttackFile:"time_attack1.json",setStatus:t})]})}function j(e){let{setStatus:t}=e;return(0,s.jsx)("button",{className:"returnToProblemSelectionButton",onClick:()=>t({status_type:"ProblemSelectionScreen"}),children:"戻る"})}function x(e){let{moveCount:t}=e;return(0,s.jsxs)("div",{children:["手数: ",t]})}function _(e){let{bitHistory:t,problem:r}=e,[a,o]=(0,n.useState)(0);return(0,n.useEffect)(()=>{if(console.log(r),t[t.length-1]===r.target)return;let e=setTimeout(()=>{o(a+100)},100);return()=>clearTimeout(e)},[a]),(0,s.jsxs)("div",{children:["タイム: ",a/1e3,"秒"]})}function f(e){let{setStatus:t,problemFileName:r}=e,[m,d]=(0,n.useReducer)(o,[]),[b,h]=(0,n.useState)({bit_length:0,start:"",target:"",operation_count:0,operations:[],minimum_moves:0});return(0,n.useEffect)(()=>{!async function(){try{let e=a.env.NEXT_PUBLIC_BASE_PATH||"";console.log("basepath: ".concat(e));let t=await fetch("".concat(e,"/problems/").concat(r));if(!t.ok)throw Error("Failed to fetch JSON: ".concat(t.status," ").concat(t.statusText));let s=await t.json();h(s.problem),d({operation_type:"clear"}),d({operation_type:"append",parameter:s.problem.start})}catch(e){console.error("Error fetching problem file:",e),e instanceof Error?alert("問題ファイルの読み込みに失敗しました: ".concat(e.message)):alert("問題ファイルの読み込みに失敗しました: 不明なエラーが発生しました。")}}()},[r]),console.log(b),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:["Target: ",b.target]}),(0,s.jsx)(c,{currentBits:m[m.length-1]}),(0,s.jsx)(x,{moveCount:m.length-1}),(0,s.jsx)(_,{bitHistory:m,problem:b}),(0,s.jsx)(l,{children:b.operations.map((e,t)=>(0,s.jsx)(i,{dispatchBitHistory:d,operation:e},t))}),(0,s.jsx)(u,{bitHistory:m,dispatchBitHistory:d}),(0,s.jsx)(p,{bitHistory:m,dispatchBitHistory:d}),(0,s.jsx)("div",{children:(0,s.jsx)(j,{setStatus:t})}),(0,s.jsxs)("div",{children:["BitHistory: ",m.toString()]})]})}function y(e){let{setStatus:t,timeAttackFileName:r}=e,[a,o]=(0,n.useState)({problems:[],problem_count:0}),[i,l]=(0,n.useState)([]),[c,u]=(0,n.useState)(0);return(0,n.useEffect)(()=>{!async function(){let e=await fetch("/time_attack_data/"+r),t=await e.json();o(t);let s=Array(t.problem_count);for(let e=0;e<t.problem_count;e++){let r=Math.floor(Math.random()*t.problems.length),n=await fetch("/problems/"+t.problems[r]),a=await n.json();s[e]=a.problem}l(s),console.log(s)}()},[]),(0,s.jsxs)("div",{children:["問題数: ",c,(0,s.jsx)("div",{children:(0,s.jsx)(j,{setStatus:t})})]})}function S(){return(0,s.jsx)("div",{children:(0,s.jsx)("h1",{className:"title",children:"Bit Breaker"})})}function v(e){let{status:t}=e;switch(t.status_type){case"ProblemSelectionScreen":return(0,s.jsxs)("div",{children:["status_type: ",t.status_type]});case"ProblemModeGameScreen":return(0,s.jsxs)("div",{children:["status_type: ",t.status_type,(0,s.jsx)("br",{}),"problem_file: ",t.problem_file]});case"TimeAttackModeGameScreen":return(0,s.jsxs)("div",{children:["status_type: ",t.status_type,(0,s.jsx)("br",{}),"time_attack_file: ",t.time_attack_file]})}}function k(){let[e,t]=(0,n.useState)({status_type:"ProblemSelectionScreen"});switch(e.status_type){case"ProblemSelectionScreen":return(0,s.jsxs)("div",{children:[(0,s.jsx)(S,{}),(0,s.jsx)(h,{setStatus:t}),(0,s.jsx)(v,{status:e})]});case"ProblemModeGameScreen":return(0,s.jsxs)("div",{children:[(0,s.jsx)(S,{}),(0,s.jsx)(f,{setStatus:t,problemFileName:e.problem_file}),(0,s.jsx)(v,{status:e})]});case"TimeAttackModeGameScreen":return(0,s.jsxs)("div",{children:[(0,s.jsx)(S,{}),(0,s.jsx)(y,{setStatus:t,timeAttackFileName:e.time_attack_file}),(0,s.jsx)(v,{status:e})]})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[690,441,684,358],()=>t(1485)),_N_E=e.O()}]);