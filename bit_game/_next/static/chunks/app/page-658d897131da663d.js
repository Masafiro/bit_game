(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{347:()=>{},1485:(t,e,r)=>{Promise.resolve().then(r.bind(r,3792))},3792:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>g});var s=r(5155),n=r(2115);r(347);var o=r(9509);function a(t,e){switch(e.operation_type){case"append":{let r=structuredClone(t);return r.push(e.parameter),r}case"bitoperation":{let r=structuredClone(t),s=function(t,e){switch(e.operation_type){case"set":return e.parameter;case"and":return t.split("").map((t,r)=>"1"===t&&"1"===e.parameter[r]?"1":"0").join("");case"or":return t.split("").map((t,r)=>"1"===t||"1"===e.parameter[r]?"1":"0").join("");case"xor":return t.split("").map((t,r)=>"1"===t&&"0"===e.parameter[r]||"0"===t&&"1"===e.parameter[r]?"1":"0").join("");case"xnor":return t.split("").map((t,r)=>t===e.parameter[r]?"1":"0").join("");case"not":return t.split("").map(t=>"1"===t?"0":"1").join("");case"cyclic-lshift":return t.slice(1)+t[0];case"cyclic-rshift":return t[t.length-1]+t.slice(0,-1);default:throw Error("Unknown operation")}}(r[r.length-1],e.bit_operation);return r.push(s),r}case"pop":{let e=structuredClone(t);return e.pop(),e}case"clear":return[]}}function i(t){let{dispatchbitHistory:e,operation:r}=t;return(0,s.jsxs)("button",{className:"bitOperationButton",onClick:()=>{e({operation_type:"bitoperation",bit_operation:r})},children:[r.operation_type,"parameter"in r&&" ".concat(r.parameter)]})}function c(t){let{children:e}=t;return(0,s.jsx)("div",{className:"bitOperationButtonContainer",children:e})}function l(t){let{currentBits:e}=t;return(0,s.jsxs)("div",{className:"bitDisplay",children:[" ",e," "]})}function u(t){let{bitHistory:e,dispatchbitHistory:r}=t;return 1===e.length?(0,s.jsx)("button",{className:"undoButtonDisabled",children:"1 手戻る"}):(0,s.jsx)("button",{className:"undoButtonEnabled",onClick:()=>r({operation_type:"pop"}),children:"1 手戻る"})}function p(t){let{bitHistory:e,dispatchbitHistory:r}=t;return(0,s.jsx)("button",{className:"retryButton",onClick:()=>{let t=e[0];r({operation_type:"clear"}),r({operation_type:"append",parameter:t})},children:"リトライ"})}function m(t){let{children:e}=t;return(0,s.jsx)("div",{className:"problemButtonContainer",children:e})}function d(t){let{problemName:e,problemFile:r,setStatus:n}=t;return(0,s.jsx)("button",{className:"problemButton",onClick:()=>n({status_type:"ProblemModeGameScreen",problem_file:r}),children:e})}function h(t){let{timeAttackFile:e,setStatus:r}=t;return(0,s.jsx)("button",{className:"timeAttackButton",onClick:()=>r({status_type:"TimeAttackModeGameScreen",time_attack_file:e}),children:"タイムアタック"})}function b(t){let{setStatus:e}=t;return(0,s.jsxs)("div",{children:[(0,s.jsxs)(m,{children:[(0,s.jsx)(d,{problemName:"Problem 1",problemFile:"problem1.json",setStatus:e}),(0,s.jsx)(d,{problemName:"Problem 2",problemFile:"problem2.json",setStatus:e}),(0,s.jsx)(d,{problemName:"Problem 3",problemFile:"problem3.json",setStatus:e})]}),(0,s.jsx)(h,{timeAttackFile:"time_attack1.json",setStatus:e})]})}function j(t){let{setStatus:e}=t;return(0,s.jsx)("button",{className:"returnToProblemSelectionButton",onClick:()=>e({status_type:"ProblemSelectionScreen"}),children:"戻る"})}function x(t){let{moveCount:e}=t;return(0,s.jsxs)("div",{children:["手数: ",e]})}function f(t){let{isActive:e}=t,[r,o]=(0,n.useState)(0);return(0,n.useEffect)(()=>{if(e){let t=setTimeout(()=>{o(r+100)},100);return()=>clearTimeout(t)}},[r]),(0,s.jsxs)("div",{children:["タイム: ",r/1e3,"秒"]})}function _(t){let{setStatus:e,problemFileName:r}=t,[m,d]=(0,n.useReducer)(a,[]),[h,b]=(0,n.useState)({bit_length:0,start:"",target:"",operation_count:0,operations:[],minimum_moves:0});return(0,n.useEffect)(()=>{!async function(){try{let t=o.env.NEXT_PUBLIC_BASE_PATH||"";console.log("basepath: ".concat(t));let e=await fetch("".concat(t,"/problems/").concat(r));if(!e.ok)throw Error("Failed to fetch JSON: ".concat(e.status," ").concat(e.statusText));let s=await e.json();b(s.problem),d({operation_type:"clear"}),d({operation_type:"append",parameter:s.problem.start})}catch(t){console.error("Error fetching problem file:",t),t instanceof Error?alert("問題ファイルの読み込みに失敗しました: ".concat(t.message)):alert("問題ファイルの読み込みに失敗しました: 不明なエラーが発生しました。")}}()},[]),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:["Target: ",h.target]}),(0,s.jsx)(l,{currentBits:m[m.length-1]}),(0,s.jsx)(x,{moveCount:m.length-1}),(0,s.jsx)(f,{isActive:m[m.length-1]!==h.target}),(0,s.jsx)(c,{children:h.operations.map((t,e)=>(0,s.jsx)(i,{dispatchbitHistory:d,operation:t},e))}),(0,s.jsx)(u,{bitHistory:m,dispatchbitHistory:d}),(0,s.jsx)(p,{bitHistory:m,dispatchbitHistory:d}),(0,s.jsx)("div",{children:(0,s.jsx)(j,{setStatus:e})}),(0,s.jsxs)("div",{children:["bitHistory: ",m.toString()]})]})}function y(t){let{setStatus:e,timeAttackFileName:r}=t,[m,d]=(0,n.useState)({problems:[],problem_count:0}),[h,b]=(0,n.useState)(0),[_,y]=(0,n.useState)(0),[S,v]=(0,n.useState)({bit_length:0,start:"",target:"",operation_count:0,operations:[],minimum_moves:0}),[g,k]=(0,n.useReducer)(a,[]);return(0,n.useEffect)(()=>{!async function(){try{let t=o.env.NEXT_PUBLIC_BASE_PATH||"";console.log("basepath: ".concat(t));let e=await fetch("".concat(t,"/time_attack_data/").concat(r));if(!e.ok)throw Error("Failed to fetch JSON: ".concat(e.status," ").concat(e.statusText));let s=await e.json();d(s),y(1)}catch(t){console.error("Error fetching problem file:",t),t instanceof Error?alert("問題ファイルの読み込みに失敗しました: ".concat(t.message)):alert("問題ファイルの読み込みに失敗しました: 不明なエラーが発生しました。")}}()},[]),(0,n.useEffect)(()=>{0!==_&&t();async function t(){let t=Math.floor(Math.random()*m.problems.length);try{let e=o.env.NEXT_PUBLIC_BASE_PATH||"",r=await fetch("".concat(e,"/problems/").concat(m.problems[t]));if(!r.ok)throw Error("Failed to fetch JSON: ".concat(r.status," ").concat(r.statusText));let s=await r.json();v(s.problem),k({operation_type:"clear"}),k({operation_type:"append",parameter:s.problem.start})}catch(t){console.error("Error fetching problem file:",t),t instanceof Error?alert("問題ファイルの読み込みに失敗しました: ".concat(t.message)):alert("問題ファイルの読み込みに失敗しました: 不明なエラーが発生しました。")}}},[_]),(0,n.useEffect)(()=>{if(g.length>0&&g[g.length-1]===S.target){let t=h+1;b(t),t<m.problem_count&&setTimeout(()=>{y(t+1)},1e3)}},[g]),(0,s.jsxs)("div",{children:["解いた問題数: ",h,(0,s.jsx)("br",{}),"問題数: ",m.problem_count,(0,s.jsx)("br",{}),(0,s.jsxs)("div",{children:["Target: ",S.target]}),(0,s.jsx)(l,{currentBits:g[g.length-1]}),(0,s.jsx)(x,{moveCount:g.length-1}),(0,s.jsx)(f,{isActive:0==m.problem_count||h<m.problem_count}),(0,s.jsx)(c,{children:S.operations.map((t,e)=>(0,s.jsx)(i,{dispatchbitHistory:k,operation:t},e))}),(0,s.jsx)(u,{bitHistory:g,dispatchbitHistory:k}),(0,s.jsx)(p,{bitHistory:g,dispatchbitHistory:k}),(0,s.jsx)("div",{children:(0,s.jsx)(j,{setStatus:e})}),(0,s.jsxs)("div",{children:["bitHistory: ",g.toString()]})]})}function S(){return(0,s.jsx)("div",{children:(0,s.jsx)("h1",{className:"title",children:"Bit Breaker"})})}function v(t){let{status:e}=t;switch(e.status_type){case"ProblemSelectionScreen":return(0,s.jsxs)("div",{children:["status_type: ",e.status_type]});case"ProblemModeGameScreen":return(0,s.jsxs)("div",{children:["status_type: ",e.status_type,(0,s.jsx)("br",{}),"problem_file: ",e.problem_file]});case"TimeAttackModeGameScreen":return(0,s.jsxs)("div",{children:["status_type: ",e.status_type,(0,s.jsx)("br",{}),"time_attack_file: ",e.time_attack_file]})}}function g(){let[t,e]=(0,n.useState)({status_type:"ProblemSelectionScreen"});switch(t.status_type){case"ProblemSelectionScreen":return(0,s.jsxs)("div",{children:[(0,s.jsx)(S,{}),(0,s.jsx)(b,{setStatus:e}),(0,s.jsx)(v,{status:t})]});case"ProblemModeGameScreen":return(0,s.jsxs)("div",{children:[(0,s.jsx)(S,{}),(0,s.jsx)(_,{setStatus:e,problemFileName:t.problem_file}),(0,s.jsx)(v,{status:t})]});case"TimeAttackModeGameScreen":return(0,s.jsxs)("div",{children:[(0,s.jsx)(S,{}),(0,s.jsx)(y,{setStatus:e,timeAttackFileName:t.time_attack_file}),(0,s.jsx)(v,{status:t})]})}}}},t=>{var e=e=>t(t.s=e);t.O(0,[690,441,684,358],()=>e(1485)),_N_E=t.O()}]);