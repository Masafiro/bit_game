(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{347:()=>{},1485:(t,e,r)=>{Promise.resolve().then(r.bind(r,3792))},3792:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>E});var s=r(5155),n=r(2115);r(347);var o=r(9509);function a(t,e){switch(e.operation_type){case"append":{let r=structuredClone(t);return r.push(e.parameter),r}case"bitoperation":{let r=structuredClone(t),s=function(t,e){switch(e.operation_type){case"set":return e.parameter;case"and":return t.split("").map((t,r)=>"1"===t&&"1"===e.parameter[r]?"1":"0").join("");case"or":return t.split("").map((t,r)=>"1"===t||"1"===e.parameter[r]?"1":"0").join("");case"xor":return t.split("").map((t,r)=>"1"===t&&"0"===e.parameter[r]||"0"===t&&"1"===e.parameter[r]?"1":"0").join("");case"xnor":return t.split("").map((t,r)=>t===e.parameter[r]?"1":"0").join("");case"not":return t.split("").map(t=>"1"===t?"0":"1").join("");case"cyclic-lshift":return t.slice(1)+t[0];case"cyclic-rshift":return t[t.length-1]+t.slice(0,-1);default:throw Error("Unknown operation")}}(r[r.length-1],e.bit_operation);return r.push(s),r}case"pop":{let e=structuredClone(t);return e.pop(),e}case"clear":return[]}}function i(t){let{dispatchbitHistory:e,operation:r}=t;return(0,s.jsxs)("button",{className:"bitOperationButton",onClick:()=>{e({operation_type:"bitoperation",bit_operation:r})},children:[r.operation_type,"parameter"in r&&" ".concat(r.parameter)]})}function c(t){let{children:e}=t;return(0,s.jsx)("div",{className:"bitOperationButtonContainer",children:e})}function l(t){let{currentBits:e}=t;return(0,s.jsxs)("div",{className:"bitDisplay",children:[" ",e," "]})}function u(t){let{bitHistory:e,dispatchbitHistory:r}=t;return 1===e.length?(0,s.jsx)("button",{className:"undoButtonDisabled",children:"1 手戻る"}):(0,s.jsx)("button",{className:"undoButtonEnabled",onClick:()=>r({operation_type:"pop"}),children:"1 手戻る"})}function m(t){let{bitHistory:e,dispatchbitHistory:r}=t;return(0,s.jsx)("button",{className:"retryButton",onClick:()=>{let t=e[0];r({operation_type:"clear"}),r({operation_type:"append",parameter:t})},children:"リトライ"})}function p(t){let{children:e}=t;return(0,s.jsx)("div",{className:"problemButtonContainer",children:e})}function d(t){let{problemName:e,problemFile:r,setStatus:n}=t;return"true"==localStorage.getItem(r)?(0,s.jsxs)("button",{className:"problemButton",onClick:()=>n({status_type:"ProblemModeGameScreen",problem_file:r}),children:[e," (solved)"]}):(0,s.jsxs)("button",{className:"problemButton",onClick:()=>n({status_type:"ProblemModeGameScreen",problem_file:r}),children:[e," (unsolved)"]})}function j(t){let{children:e}=t;return(0,s.jsx)("div",{className:"timeAttackButtonContainer",children:e})}function b(t){let{timeAttackName:e,timeAttackFile:r,setStatus:n}=t,o=localStorage.getItem(r);return null===o?(0,s.jsx)("button",{className:"timeAttackButton",onClick:()=>n({status_type:"TimeAttackModeGameScreen",time_attack_file:r}),children:e}):(0,s.jsxs)("button",{className:"timeAttackButton",onClick:()=>n({status_type:"TimeAttackModeGameScreen",time_attack_file:r}),children:[e," (ベストタイム: ",Number(o)/1e3," 秒)"]})}function h(t){let{setStatus:e}=t;return(0,s.jsx)("button",{className:"problemModeButton",onClick:()=>e({status_type:"ProblemSelectionScreen"}),children:"問題を解く"})}function x(t){let{setStatus:e}=t;return(0,s.jsx)("button",{className:"timeAttackModeButton",onClick:()=>e({status_type:"TimeAttackSelectionScreen"}),children:"タイムアタックをする"})}function f(t){let{setStatus:e}=t;return(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"left",gap:"50px"},children:[(0,s.jsx)(h,{setStatus:e}),(0,s.jsx)(x,{setStatus:e})]})}function _(t){let{setStatus:e}=t;return console.log(localStorage.getItem("problem1.json")),(0,s.jsxs)("div",{children:[(0,s.jsxs)(p,{children:[(0,s.jsx)(d,{problemName:"Problem 1",problemFile:"problem1.json",setStatus:e}),(0,s.jsx)(d,{problemName:"Problem 2",problemFile:"problem2.json",setStatus:e}),(0,s.jsx)(d,{problemName:"Problem 3",problemFile:"problem3.json",setStatus:e}),(0,s.jsx)(d,{problemName:"Problem 4",problemFile:"problem3.json",setStatus:e}),(0,s.jsx)(d,{problemName:"Problem 5",problemFile:"problem3.json",setStatus:e})]}),(0,s.jsx)("div",{className:"returnContainer",children:(0,s.jsx)(g,{setStatus:e})})]})}function S(t){let{setStatus:e}=t;return(0,s.jsx)("button",{className:"returnToProblemSelectionButton",onClick:()=>e({status_type:"ProblemSelectionScreen"}),children:"戻る"})}function y(t){let{setStatus:e}=t;return(0,s.jsx)("button",{className:"returnToTimeAttackSelectionButton",onClick:()=>e({status_type:"TimeAttackSelectionScreen"}),children:"戻る"})}function g(t){let{setStatus:e}=t;return(0,s.jsx)("button",{className:"returnToTitleButton",onClick:()=>e({status_type:"TitleScreen"}),children:"戻る"})}function k(t){let{setStatus:e}=t;return(0,s.jsxs)("div",{children:[(0,s.jsxs)(j,{children:[(0,s.jsx)(b,{timeAttackName:"5桁 1手 10問",timeAttackFile:"time_attack1.json",setStatus:e}),(0,s.jsx)(b,{timeAttackName:"5桁 2手 10問",timeAttackFile:"time_attack1.json",setStatus:e}),(0,s.jsx)(b,{timeAttackName:"5桁 3手 10問",timeAttackFile:"time_attack1.json",setStatus:e})]}),(0,s.jsx)("div",{className:"returnContainer",children:(0,s.jsx)(g,{setStatus:e})})]})}function v(t){let{moveCount:e}=t;return(0,s.jsxs)("div",{children:["手数: ",e]})}function N(t){let{isActive:e,time:r,setTime:o}=t;return(0,n.useEffect)(()=>{if(e){let t=setTimeout(()=>{o(r+100)},100);return()=>clearTimeout(t)}},[r]),(0,s.jsxs)("div",{children:["タイム: ",r/1e3,"秒"]})}function T(t){let{setStatus:e,problemFileName:r}=t,[p,d]=(0,n.useReducer)(a,[]),[j,b]=(0,n.useState)({bit_length:0,start:"",target:"",operation_count:0,operations:[],minimum_moves:0}),[h,x]=(0,n.useState)(0);return(0,n.useEffect)(()=>{!async function(){try{let t=o.env.NEXT_PUBLIC_BASE_PATH||"";console.log("basepath: ".concat(t));let e=await fetch("".concat(t,"/problems/").concat(r));if(!e.ok)throw Error("Failed to fetch JSON: ".concat(e.status," ").concat(e.statusText));let s=await e.json();b(s.problem),d({operation_type:"clear"}),d({operation_type:"append",parameter:s.problem.start})}catch(t){console.error("Error fetching problem file:",t),t instanceof Error?alert("問題ファイルの読み込みに失敗しました: ".concat(t.message)):alert("問題ファイルの読み込みに失敗しました: 不明なエラーが発生しました。")}}()},[]),p[p.length-1]===j.target&&(console.log("solved ",r),localStorage.setItem(r,"true")),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:["Target: ",j.target]}),(0,s.jsx)(l,{currentBits:p[p.length-1]}),(0,s.jsx)(v,{moveCount:p.length-1}),(0,s.jsx)(N,{isActive:p[p.length-1]!==j.target,time:h,setTime:x}),(0,s.jsx)(c,{children:j.operations.map((t,e)=>(0,s.jsx)(i,{dispatchbitHistory:d,operation:t},e))}),(0,s.jsx)(u,{bitHistory:p,dispatchbitHistory:d}),(0,s.jsx)(m,{bitHistory:p,dispatchbitHistory:d}),(0,s.jsx)("div",{children:(0,s.jsx)(S,{setStatus:e})}),(0,s.jsxs)("div",{children:["bitHistory: ",p.toString()]})]})}function C(t){let{setStatus:e,timeAttackFileName:r}=t,[p,d]=(0,n.useState)({problems:[],problem_count:0}),[j,b]=(0,n.useState)(0),[h,x]=(0,n.useState)(0),[f,_]=(0,n.useState)({bit_length:0,start:"",target:"",operation_count:0,operations:[],minimum_moves:0}),[S,g]=(0,n.useReducer)(a,[]),[k,T]=(0,n.useState)(0);return(0,n.useEffect)(()=>{!async function(){try{let t=o.env.NEXT_PUBLIC_BASE_PATH||"";console.log("basepath: ".concat(t));let e=await fetch("".concat(t,"/time_attack_data/").concat(r));if(!e.ok)throw Error("Failed to fetch JSON: ".concat(e.status," ").concat(e.statusText));let s=await e.json();d(s),x(1)}catch(t){console.error("Error fetching problem file:",t),t instanceof Error?alert("問題ファイルの読み込みに失敗しました: ".concat(t.message)):alert("問題ファイルの読み込みに失敗しました: 不明なエラーが発生しました。")}}()},[]),(0,n.useEffect)(()=>{0!==h&&t();async function t(){let t=Math.floor(Math.random()*p.problems.length);try{let e=o.env.NEXT_PUBLIC_BASE_PATH||"",r=await fetch("".concat(e,"/problems/").concat(p.problems[t]));if(!r.ok)throw Error("Failed to fetch JSON: ".concat(r.status," ").concat(r.statusText));let s=await r.json();_(s.problem),g({operation_type:"clear"}),g({operation_type:"append",parameter:s.problem.start})}catch(t){console.error("Error fetching problem file:",t),t instanceof Error?alert("問題ファイルの読み込みに失敗しました: ".concat(t.message)):alert("問題ファイルの読み込みに失敗しました: 不明なエラーが発生しました。")}}},[h]),(0,n.useEffect)(()=>{if(S.length>0&&S[S.length-1]===f.target){let t=j+1;if(b(t),t<p.problem_count)setTimeout(()=>{x(t+1)},1e3);else{let t=k+100;null==localStorage.getItem(r)?localStorage.setItem(r,t.toString()):localStorage.setItem(r,Math.min(Number(localStorage.getItem(r)),t).toString())}}},[S]),(0,s.jsxs)("div",{children:["解いた問題数: ",j,(0,s.jsx)("br",{}),"問題数: ",p.problem_count,(0,s.jsx)("br",{}),(0,s.jsxs)("div",{children:["Target: ",f.target]}),(0,s.jsx)(l,{currentBits:S[S.length-1]}),(0,s.jsx)(v,{moveCount:S.length-1}),(0,s.jsx)(N,{isActive:0==p.problem_count||j<p.problem_count,time:k,setTime:T}),(0,s.jsx)(c,{children:f.operations.map((t,e)=>(0,s.jsx)(i,{dispatchbitHistory:g,operation:t},e))}),(0,s.jsx)(u,{bitHistory:S,dispatchbitHistory:g}),(0,s.jsx)(m,{bitHistory:S,dispatchbitHistory:g}),(0,s.jsx)("div",{children:(0,s.jsx)(y,{setStatus:e})}),(0,s.jsxs)("div",{children:["bitHistory: ",S.toString()]})]})}function A(){return(0,s.jsx)("div",{children:(0,s.jsx)("h1",{className:"title",children:"Bit Breaker"})})}function B(t){let{status:e}=t;switch(e.status_type){case"ProblemSelectionScreen":return(0,s.jsxs)("div",{children:["status_type: ",e.status_type]});case"ProblemModeGameScreen":return(0,s.jsxs)("div",{children:["status_type: ",e.status_type,(0,s.jsx)("br",{}),"problem_file: ",e.problem_file]});case"TimeAttackModeGameScreen":return(0,s.jsxs)("div",{children:["status_type: ",e.status_type,(0,s.jsx)("br",{}),"time_attack_file: ",e.time_attack_file]})}}function E(){let[t,e]=(0,n.useState)({status_type:"TitleScreen"});switch(t.status_type){case"TitleScreen":return(0,s.jsxs)("div",{children:[(0,s.jsx)(A,{}),(0,s.jsx)(f,{setStatus:e})]});case"ProblemSelectionScreen":return(0,s.jsxs)("div",{children:[(0,s.jsx)(A,{}),(0,s.jsx)(_,{setStatus:e}),(0,s.jsx)(B,{status:t})]});case"TimeAttackSelectionScreen":return(0,s.jsxs)("div",{children:[(0,s.jsx)(A,{}),(0,s.jsx)(k,{setStatus:e}),(0,s.jsx)(B,{status:t})]});case"ProblemModeGameScreen":return(0,s.jsxs)("div",{children:[(0,s.jsx)(A,{}),(0,s.jsx)(T,{setStatus:e,problemFileName:t.problem_file}),(0,s.jsx)(B,{status:t})]});case"TimeAttackModeGameScreen":return(0,s.jsxs)("div",{children:[(0,s.jsx)(A,{}),(0,s.jsx)(C,{setStatus:e,timeAttackFileName:t.time_attack_file}),(0,s.jsx)(B,{status:t})]})}}}},t=>{var e=e=>t(t.s=e);t.O(0,[690,441,684,358],()=>e(1485)),_N_E=t.O()}]);